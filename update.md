# 更新日志

## v1.0.1 (2025-11-20)
### 🎯 功能增强
- **扩展模型支持**：新增支持Qwen3-VL-2B/4B/8B的Thinking、FP8、AWQ等12个模型变体
- **本地模型检测**：实现本地模型自动扫描和"（已下载）"标记显示功能
- **量化参数优化**：统一所有节点的量化参数默认值为"无（FP16）"
- **模型名称处理**：优化模型加载逻辑，正确处理带标记的模型名称

### 🛠️ 技术改进
- **模型映射更新**：完善BASE_MODEL_REPO_MAP配置，支持更多Qwen3-VL模型变体
- **方法重构**：优化get_available_models、get_model_repo_map、load_model等核心方法
- **参数标准化**：统一量化参数默认值，提升用户体验一致性

## v1.0.0 (2025-11-05)
ComfyUI-QwenVL-ALL 正式版发布，集成完整的Qwen3-VL模型支持体系

### 🎯 核心节点功能
- **Qwen3-VL图像描述节点** - 智能图片内容分析与描述生成
- **Qwen3-VL视觉问答节点** - 基于图像的多轮问答对话支持
- **Qwen3-VL文本生成器节点** - 多模式创意文本生成（创意写作、技术文档、营销文案等）
- **Qwen3-VL视频反推节点** - 视频关键帧提取与智能描述分析

### 🔧 模型架构优化
- **精简模型选择**：仅保留Qwen3-VL-2B/4B-Instruct核心模型，降低选择复杂度
- **本地模型支持**：优先检查`ComfyUI/models/LLM/Qwen-VL/`目录，支持本地模型自动扫描加载
- **模型加载优化**：各节点独立管理模型加载参数，支持缓存机制提升效率
- **内存管理增强**：新增模型缓存清理功能，优化内存使用

### ⚙️ 高级配置系统
- **多级别量化支持**：无量化、4位量化、8位量化、FP16模式
- **注意力类型选择**：标准注意力（兼容性好）、FlashAttention2（性能优化）、SDPA（平衡模式）
- **设备自动管理**：支持CPU/GPU自动选择，智能设备映射
- **编码兼容性**：添加Windows系统编码设置，防止Unicode解码错误

### 🛠️ 技术改进
- **参数标准化**：修复torch_dtype参数弃用警告，统一使用dtype参数
- **错误处理增强**：完善的异常捕获机制和用户友好的错误提示
- **调试信息**：详细的运行日志和性能统计信息输出
- **API优化**：支持模型下载功能（local_files_only=False）

### 🌐 本地化优化
- **中文输出优化**：专注中文内容生成，提供高质量中文描述

### 📊 使用场景
本插件适用于：
- **图片内容分析** - 智能识别和描述图像内容
- **提示词反推** - 根据参考图生成高质量提示词
- **创意灵感生成** - 基于视觉输入的创意文本创作
- **多模态问答** - 图文结合的智能问答系统
- **视频内容理解** - 视频关键信息提取和描述
- **AI工作流集成** - 作为ComfyUI工作流的重要组件

### 🎨 特色功能
- **多模式描述**：详细描述、动作分析、场景分析、情感分析等
- **智能帧采样**：均匀采样、关键帧提取、全部帧处理
- **风格化生成**：正式、轻松、幽默、专业、感性、理性等多种风格
- **关键词约束**：支持指定关键词和输出格式控制
- **令牌统计**：详细的输入输出令牌数统计和性能监控